<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${year} + '년 ' + ${month} + '월 축제 캘린더'">캘린더</title>
</head>
<body>
<h1 th:text="${year} + '년 ' + ${month} + '월 축제 캘린더'">2024년 축제 캘린더</h1>

<form th:action="@{/festivals/2024/calendar}" method="get">
    연도: <input type="number" name="year" th:value="${year}">
    월: <input type="number" name="month" th:value="${month}">
    <button type="submit">조회</button>
</form>

<hr>

<table class="calendar">
    <tr>
        <th>일</th>
        <th>월</th>
        <th>화</th>
        <th>수</th>
        <th>목</th>
        <th>금</th>
        <th>토</th>
    </tr>

	<tr th:with="
	        start=${calendarStart},
	        end=${calendarEnd},
	        firstDow=${#temporals.dayOfWeek(start)}">

        <!-- 앞쪽 빈칸 -->
        <td th:each="i : ${#numbers.sequence(1, firstDow - 1)}"></td>

        <!-- 날짜 칸 -->
        <td th:each="d : ${#numbers.sequence(1, end.dayOfMonth)}">
            <div th:text="${d}">1</div>

            <div th:each="f : ${festivalMap[calendarStart.withDayOfMonth(d)]}">
                <a th:href="@{'/festivals/' + ${f.id}}"
                   th:text="${f.fcltyNm}">축제명</a>
                <br/>
            </div>
        </td>
    </tr>
</table>

<br/>

<a th:href="@{'/festivals/2024/calendar'(year=${year}, month=${month-1})}">이전달</a>
|
<a th:href="@{'/festivals/2024/calendar'(year=${year}, month=${month+1})}">다음달</a>
|
<a th:href="@{/festivals/2024}">전체 목록으로</a>

</body>
</html>
